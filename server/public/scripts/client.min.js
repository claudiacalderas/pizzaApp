var myApp=angular.module("myApp",["ngRoute"]);myApp.config(["$routeProvider",function(a){a.when("/menu",{templateUrl:"views/templates/menu.html",controller:"MenuController",controllerAs:"menu"}).when("/order",{templateUrl:"views/templates/order.html",controller:"OrderController",controllerAs:"order"}).when("/confirm",{templateUrl:"views/templates/confirm.html",controller:"ConfirmController",controllerAs:"confirm"}).otherwise({redirectTo:"menu"})}]),myApp.controller("ConfirmController",["PizzaService",function(a){console.log("ConfirmController"),this.confirmedPizzaObject=a.confirmedPizzaObject}]),myApp.controller("MenuController",["PizzaService",function(a){console.log("MenuController");var b=this;b.pizzaSizes=["small","medium","large"],b.pizzaToppings=["pepperoni","cheese","sausage","mushrooms","peppers","pineapple"],b.pizzaSize="",b.pizzaTopping="",b.submit=function(b,c){var d={};d.size=b,d.topping=c,a.submitOrder(d)}}]),myApp.controller("OrderController",["PizzaService",function(a){console.log("OrderController");var b=this;b.pizzaOrderObject=a.pizzaOrderObject,b.remove=function(b){console.log("Order in controllerOder",b),a.deleteItem(b)},b.confirm=function(b){console.log("Confirm in controllerOder",b),a.confirmItem(b)},b.confirmAll=function(){a.confirmAll()}}]),myApp.factory("PizzaService",function(){smallPrice=6,mediumPrice=7,largePrice=8,toppingsPrice=1;var a={orders:[]},b={orders:[],total:Number};b.total=0;var c=function(a){var b=0;switch(a.size){case"small":b+=smallPrice;break;case"medium":b+=mediumPrice;break;case"large":b+=largePrice}return a.topping&&(b+=toppingsPrice),b},d=function(b){b.price=c(b),a.orders.push(b)},e=function(b){var c=a.orders.indexOf(b);a.orders.splice(c,1)},f=function(c){b.orders.push(c),b.total+=c.price;var d=a.orders.indexOf(c);a.orders.splice(d,1),console.log("confirm item=",a.orders)};return{pizzaOrderObject:a,confirmedPizzaObject:b,confirmAll:function(){for(var c=0;c<a.orders.length;c++)b.orders.push(a.orders[c]);b.total=0;for(var d=0;d<b.orders.length;d++)b.total+=b.orders[d].price;a.orders=[]},submitOrder:d,deleteItem:e,confirmItem:f}});